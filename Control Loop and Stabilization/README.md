# Drone Flight Control System Overview

## Motor Direction and Torque Compensation

In a quadcopter, the motors must spin in opposite directions to balance the torque generated by each rotor. Without accounting for this, the drone would continuously spin uncontrollably in one direction due to unbalanced torque forces.
This is the direction our motors should spin, we can reverse the direction by recalibrating the BLHeli ESCs:

![image](https://github.com/user-attachments/assets/e418890d-b370-42bd-92d3-15b549098ed0)

Typically, two motors spin clockwise (CW) and the other two spin counter-clockwise (CCW). This alternating pattern ensures that the torques cancel out when all motors are spinning at the same speed, maintaining stable yaw.

## Yaw Control (Turning Left or Right)

To control yaw—rotational movement around the vertical axis—we deliberately unbalance the torque by changing the speed of two motors that spin in the same direction. By increasing the speed of one pair and decreasing the speed of the opposite pair, the net torque causes the drone to rotate left or right. Once the yaw movement is complete, the speeds are rebalanced to maintain orientation.

## Pitch Control (Moving Forward or Backward)

Pitch refers to the forward and backward tilt of the drone. To pitch forward, the rear motors' speeds are increased while the front motors' speeds are decreased. This causes the drone to tilt forward and move in that direction. The same principle applies in reverse for pitching backward.

## Roll Control (Moving Left or Right)

Roll is similar to pitch, but the motion occurs along the lateral axis. To roll left, the right motors are sped up while the left motors are slowed down, tilting the drone to the left. For a right roll, the opposite adjustment is made. The logic is identical to pitch control; the only difference lies in the orientation of the movement.

![Propeller-speeds-in-throttle-roll-pitch-and-yaw-control-Higher-speed-is-represented-by](https://github.com/user-attachments/assets/365f9771-49a1-4100-a70a-53770ad539dc)

## Control System and Input Blending

The final software system will blend two key sources of control input:
- IMU stabilization data (gyroscope and accelerometer feedback)
- RC input (commands from the remote control)

(These blended inputs are processed in the main control loop and passed to a PID controller. The PID controller then generates the appropriate PWM signals to adjust motor speeds and ensure stable, responsive flight behavior.)

## RTOS-Based Task Scheduling

To efficiently manage the timing and coordination of various subsystems, we use an RTOS (Real-Time Operating System). The RTOS handles the scheduling of key tasks such as:
- IMU data acquisition
- RC input acquisition
- Control loop

